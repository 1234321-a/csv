language: php

matrix:
    include:
      - php: 5.3
        dist: precise
      - php: 5.4
        dist: trusty
      - php: 5.5
        dist: trusty
      - php: 5.6
        dist: trusty
      - php: 7.0
        dist: trusty
      - php: 7.1
        dist: trusty
      - php: 7.2
        dist: trusty
# allow 7.2 to fail as phpunit 3 not working correctly with php 7.2
    allow_failures:
      - php: 7.2
        dist: trusty

before_script:
  - ./scripts/bundle-devtools.sh .
  - export GOODBY_CSV_TEST_DB_HOST=127.0.0.1
  - export GOODBY_CSV_TEST_DB_USER=root
  - export GOODBY_CSV_TEST_DB_PASS=""
  - mysql -e 'create database goodby_csv_test'
script: ./vendor/bin/phpunit --coverage-text --configuration phpunit.xml.dist
